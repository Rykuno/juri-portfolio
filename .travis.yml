language: node_js
node_js:
  - "stable"
  - "lts/*"
branches:
  only:
    - master
cache:
  directories:
  - node_modules
before_script:
  - "npm i -g gatsby-cli"
  - "yarn"
script:
  - gatsby build
deploy:
  - provider: s3
    # rest of S3 deployment for MyApp.zip
    # â‹®
  - provider: codedeploy
    access_key_id: "YOUR AWS ACCESS KEY"
    secret_access_key: "YOUR AWS SECRET KEY"
    bucket: "S3 Bucket"
    key: latest/MyApp.zip
    application: MyApp
    deployment_group: MyDeploymentGroup  
    on:
      branch: master